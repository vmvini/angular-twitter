/*

 jsOAuth version 1.4.0so1
 Copyright (c) 2010, 2011 Rob Griffiths (http://bytespider.eu)
 jsOAuth is freely distributable under the terms of an MIT-style license.
*/
var z=z||this;
z.G=function(t){function n(){}function k(a,b){var c=arguments.callee;if(!(this instanceof c))return new c(a,b);if(a instanceof Array&&a.length===2){this.name=a[0]+"";this.value=a[1]+""}else if(a!==undefined){this.name=a;this.value=b===undefined?"":b}return this}function i(a){i.g.constructor.call(this,a);var b=arguments.callee,c=this;if(!(this instanceof b))return new b(a);if(a instanceof i)a.forEach(function(d){c.push(d)});else if(a instanceof Array)for(b=0;b<a.length;b++)a[b]instanceof Array&&a[b].length===
2&&c.push(new k(a[b][0],a[b][1]));return c}function p(a){var b=arguments.callee,c,d,e,f,g;d=/^([^:\/?#]+?:\/\/)*([^\/:?#]*)?(:[^\/?#]*)*([^?#]*)(\?[^#]*)?(#(.*))*/;if(!(this instanceof b))return new b(a);this.path=this.port=this.host=this.scheme="";this.b=new r;this.anchor="";if(a!==null){c=a.match(d);b=c[1];d=c[2];e=c[3];f=c[4];g=c[5];c=c[6];b=b!==undefined?b.replace("://","").toLowerCase():"http";e=e?e.replace(":",""):b==="https"?"443":"80";b=b=="http"&&e==="443"?"https":b;g=g?g.replace("?",""):
"";c=c?c.replace("#",""):"";if(b==="https"&&e!=="443"||b==="http"&&e!=="80")d=d+":"+e;this.scheme=b;this.host=d;this.port=e;this.path=f||"/";this.b.v(g);this.anchor=c||""}}function r(a){r.g.constructor.call(this,a)}function q(a){if(!(this instanceof q))return new q(a);return this.C(a)}function F(a){var b=new i,c,d=q.i,e=[];a.forEach(function(f){if(f.value!=="")if(f.name.toLowerCase()==="realm")c=d(f.name)+'="'+d(f.value)+'"';else b.push(new k(f.name,f.value))});b.sort().forEach(function(f){e.push(d(f.name)+
'="'+d(f.value)+'"')});c&&e.unshift(c);return e.join(", ")}function G(a,b,c,d){var e=new i,f=q.i,g=new i;e=e.concat(c).concat(d);e.D("oauth_signature");e.sort().forEach(function(l){l.value!==""&&g.push(l)});return[a,f(b),f(g.join("&"))].join("&")}function H(a){function b(){return Math.floor(Math.random()*f.length)}a=a||64;var c=a/8;a="";var d=c/4;c=c%4;var e,f=["20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B",
"3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E"];for(e=0;e<d;e++)a+=f[b()]+f[b()]+f[b()]+f[b()];for(e=0;e<c;e++)a+=f[b()];return a}function I(){var a;if(typeof t.n!=="undefined"&&typeof t.n.w.A!="undefined")a=t.n.w.A();
else if(typeof require!=="undefined")try{a=(new require("xhr")).XMLHttpRequest()}catch(b){if(typeof t.XMLHttpRequest!=="undefined")a=new t.XMLHttpRequest;else throw"No valid request transport found.";}else if(typeof t.XMLHttpRequest!=="undefined")a=new t.XMLHttpRequest;else throw"No valid request transport found.";return a}function E(a){return Array(++a).join(0).split("")}function C(a){var b=[],c,d;for(d=0;d<a.length;d++){c=a.charCodeAt(d);if(c<128)b.push(c);else if(c<2048)b.push(192+(c>>6),128+(c&
63));else if(c<65536)b.push(224+(c>>12),128+(c>>6&63),128+(c&63));else c<2097152&&b.push(240+(c>>18),128+(c>>12&63),128+(c>>6&63),128+(c&63))}return b}function v(a){if(a!==undefined){var b=a;if(b.constructor===String)b=C(b);a=(this instanceof v?this:new v(a)).hash(b);b=[];var c=a.length,d;for(d=0;d<c;d++){b.push((a[d]>>>4).toString(16));b.push((a[d]&15).toString(16))}return b.join("")}else if(!(this instanceof v))return new v;return this}n.prototype=[];n.g=Array.prototype;n.prototype.constructor=
n;n.prototype.copy=function(){var a=new this.constructor;this.forEach(function(b){if(typeof b.copy==="function")b=b.copy();a.push(b)});return a};n.prototype.concat=function(){var a=this.copy(),b,c,d;for(b=0;b<arguments.length;b++)if(arguments[b]instanceof Array){c=0;for(d=arguments[b].length;c<d;c++)a.push(arguments[b][c])}else a.push(arguments[b]);return a};n.prototype.t=function(){var a=null;if(this.length>0)a=this[0];return a};if(typeof n.prototype.forEach!=="function")n.prototype.forEach=function(a,
b){var c,d;c=0;for(d=this.length;c<d;++c)c in this&&a.call(b,this[c],c,this);return this};k.prototype.copy=function(){return new k(this.name,this.value)};k.prototype.toString=function(){var a=q.i;return a(this.name)+"="+a(this.value)};i.prototype=new n;i.g=n.prototype;i.prototype.constructor=i;i.prototype.s=function(a){var b=new this.constructor;this.forEach(function(c){c.name.toLowerCase()===a.toLowerCase()&&b.push(c)});return b};i.prototype.sort=function(a){if(typeof a==="undefined")a=function(b,
c){if(b.name<c.name)return-1;if(b.name>c.name)return 1;if(b.value<c.value)return-1;if(b.value>c.value)return 1;return 0};return i.g.sort.call(this,a)};i.prototype.D=function(a){var b,c=this.length;for(b=0;b<c;b++)if(this[b].name===a){this.splice(b,1);b--;c--}return this};i.prototype.toString=function(){var a=[],b="";this.sort().forEach(function(c){a.push(c+"")});if(a.length>0)b=a.join("&");return b};p.prototype={scheme:"",host:"",port:"",path:"",b:"",anchor:"",toString:function(){var a=this.b+"";
return this.scheme+"://"+this.host+this.path+(a!=""?"?"+a:"")+(this.anchor!==""?"#"+this.anchor:"")}};r.prototype=new i;r.g=i.prototype;r.prototype.constructor=r;r.prototype.v=function(a){var b=arguments,c=b.length,d,e,f=q.F;if(c===1)if(typeof a==="object")if(a instanceof Array)for(d=0;d<a.length;d++)a[d]instanceof Array&&a[d].length===2&&this.push(new k(a[d][0],a[d][1]));else if(a instanceof i)a.copy();else for(d in a)a.hasOwnProperty(d)&&this.push(new k(d,a[d]));else{if(typeof a==="string"){b=a.split("&");
d=0;for(c=b.length;d<c;d++){e=b[d].split("=");e[0]!==""&&this.push(new k(f(e[0]),f(e[1])))}}}else for(d=0;d<c;d+=2)this.push(new k(b[d],b[d+1]))};q.prototype={h:"",u:"",p:"",o:"",C:function(a){var b={k:a.k||false,c:a.c,l:a.l,j:a.j||"oob",q:a.q,r:a.r,d:a.d||"",e:a.e||"",m:"",f:a.f||"HMAC-SHA1"};this.h=a.h||"";this.u=a.u||"";this.p=a.p||"";this.o=a.o||"";this.K=function(){return[b.d,b.e]};this.L=function(){return b.d};this.M=function(){return b.e};this.S=function(c,d){if(d)c=[c,d];b.d=c[0];b.e=c[1]};
this.N=function(){return b.m};this.U=function(c){b.m=c};this.T=function(c){b.j=c};this.O=function(c){var d,e,f,g,l,m,h,w,j,s=[],y;j=new i;var D,A;d=c.method||"GET";e=p(c.url);f=c.data?new i(c.data):new i;g=c.headers?new i(c.headers):new i;l=c.V||function(){};m=c.J||function(){};D=function(){var o=false;f instanceof n&&f.forEach(function(u){if(u.value instanceof File||typeof u.value.fileName!=="undefined")return o=true});return o}();y=c.z?c.z:false;b.k&&netscape.R.H.k("UniversalBrowserRead UniversalBrowserWrite");
h=I();h.onreadystatechange=function(){if(h.readyState===4){var o=/^(.*?):\s*(.*?)\r?$/mg,u=new i,x="",B;if(h.getAllResponseHeaders)for(x=h.getAllResponseHeaders();B=o.exec(x);)u.push(new k(B[1],B[2]));else if(h.B){x=h.B();o=0;for(B=x.length;o<B;++o)u.push(new k(x[o][0],x[o][1]))}x=false;if((o=u.s("Content-Type").t())&&o.value==="text/xml")x=true;u={text:h.responseText,xml:x?h.responseXML:"",P:g,Q:u};if(h.status>=200&&h.status<=226||h.status==304||h.status===0)l(u);else h.status>=400&&h.status!==0&&
m(u)}};c=new i([["oauth_callback",b.j],["oauth_consumer_key",b.q],["oauth_token",b.d],["oauth_signature_method",b.f],["oauth_timestamp",parseInt(+new Date/1E3,10)],["oauth_nonce",H()],["oauth_verifier",b.m],["oauth_version","1.0"]]);w=b.f;j=j.concat(e.b);A=g.s("Content-Type").t();if((!A||A.value.toLowerCase()==="application/x-www-form-urlencoded")&&!D)j=j.concat(f);j=G(d,e.scheme+"://"+e.host+e.path,c,j);w=q.f[w](b.r,b.e,j);c.push(new k("oauth_signature",w));this.h&&c.push(new k("realm",this.h));
if(b.c)e=typeof b.c=="function"?p(b.c(e.path,e.b)):e.b!=""?p(b.c+e.path+"?"+e.b):p(b.c+e.path);else if(b.l)e=p(b.l+e.path);if(y||d==="GET"){e.b.v(f);s=null}else if(D){if(D){s=new FormData;f.forEach(function(o){s.append(o.name,o.value)})}}else if(typeof f==="string"){s=f;A||g.push(new k("Content-Type","text/plain"))}else{s=f.copy().sort().join("&");A||g.push(new k("Content-Type","application/x-www-form-urlencoded"))}h.open(d,e+"",true);h.setRequestHeader("Authorization","OAuth "+F(c));h.setRequestHeader("X-Requested-With",
"XMLHttpRequest");g.forEach(function(o){h.setRequestHeader(o.name,o.value)});h.send(s)};return this}};q.f={"HMAC-SHA1":function(a,b,c){var d;d=q.i;a=d(a);b=d(b||"");d=v.prototype;a=C(a+"&"+b);c=C(c);b=a.length;var e;if(b>d.a){a=d.hash(a);b=a.length}a=a.concat(E(d.a-b));b=a.slice(0);a=a.slice(0);for(e=0;e<d.a;e++){b[e]^=92;a[e]^=54}d=d.hash(b.concat(d.hash(a.concat(c))));c="";a=d.length;for(b=0;b<a;b++)c+=String.fromCharCode(d[b]);d=c;return t.btoa(d)}};q.i=function(a){function b(g){g=g.toString(16).toUpperCase();
if(g.length<2)g=0+g;return"%"+g}if(!a)return"";a+="";var c=/[ \t\r\n!*"'();:@&=+$,\/?%#\[\]<>{}|`^\\\u0080-\uffff]/,d=a.length,e=a.split(""),f;for(a=0;a<d;a++)if(f=e[a].match(c)){f=f[0].charCodeAt(0);if(f<128)e[a]=b(f);else if(f<2048)e[a]=b(192+(f>>6))+b(128+(f&63));else if(f<65536)e[a]=b(224+(f>>12))+b(128+(f>>6&63))+b(128+(f&63));else if(f<2097152)e[a]=b(240+(f>>18))+b(128+(f>>12&63))+b(128+(f>>6&63))+b(128+(f&63))}return e.join("")};q.F=function(a){if(!a)return"";return a.replace(/%[a-fA-F0-9]{2}/ig,
function(b){return String.fromCharCode(parseInt(b.replace("%",""),16))})};v.prototype=new v;v.prototype.a=64;v.prototype.hash=function(a){var b=[1732584193,4023233417,2562383102,271733878,3285377520],c=[1518500249,1859775393,2400959708,3395469782],d,e,f,g,l,m,h,w,j,s;if(a.constructor===String)a=C(a.I());d=a.length;f=Math.ceil((d+9)/this.a)*this.a-(d+9);e=Math.floor(d/4294967296);d=Math.floor(d%4294967296);a=a.concat([128],E(f),[e*8>>24&255,e*8>>16&255,e*8>>8&255,e*8&255,d*8>>24&255,d*8>>16&255,d*
8>>8&255,d*8&255]);e=Math.ceil(a.length/this.a);for(f=0;f<e;f++){g=a.slice(f*this.a,(f+1)*this.a);l=g.length;d=[];for(m=0;m<l;m++)d[m>>>2]|=g[m]<<24-(m-(m>>2)*4)*8;g=b[0];l=b[1];m=b[2];h=b[3];w=b[4];for(j=0;j<80;j++){if(j>=16)d[j]=(d[j-3]^d[j-8]^d[j-14]^d[j-16])<<1|(d[j-3]^d[j-8]^d[j-14]^d[j-16])>>>31;s=Math.floor(j/20);var y;a:{switch(s){case 0:y=l&m|~l&h;break a;case 1:case 3:y=l^m^h;break a;case 2:y=l&m|l&h|m&h;break a}y=-1}s=(g<<5|g>>>27)+y+w+c[s]+d[j];w=h;h=m;m=l<<30|l>>>2;l=g;g=s}b[0]+=g;b[1]+=
l;b[2]+=m;b[3]+=h;b[4]+=w}a=[];for(c=0;c<b.length*32;c+=8)a.push(b[c>>>5]>>>24-c%32&255);return a};return q}(z);z=z||this;
(function(t){t.btoa=t.btoa||function(n){for(var k=0,i=n.length,p,r,q="";k<i;k+=3){p=[n.charCodeAt(k),n.charCodeAt(k+1),n.charCodeAt(k+2)];r=[p[0]>>2,(p[0]&3)<<4|p[1]>>4,(p[1]&15)<<2|p[2]>>6,p[2]&63];if(isNaN(p[1]))r[2]=64;if(isNaN(p[2]))r[3]=64;q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[0])+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[1])+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[2])+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[3])}return q}})(z);
