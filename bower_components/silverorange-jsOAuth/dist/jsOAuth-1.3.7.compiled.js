/*

 jsOAuth version 1.3.7
 Copyright (c) 2010, 2011 Rob Griffiths (http://bytespider.eu)
 jsOAuth is freely distributable under the terms of an MIT-style license.
*/
var x=x||this;
x.F=function(r){function w(a){var b=arguments.callee,c;if(!(this instanceof b))return new b(a);for(c in a)if(a.hasOwnProperty(c))this[c]=a[c];return this}function v(){}function y(a){var b=arguments.callee,c,d,e,f,g;d=/^([^:\/?#]+?:\/\/)*([^\/:?#]*)?(:[^\/?#]*)*([^?#]*)(\?[^#]*)?(#(.*))*/;if(!(this instanceof b))return new b(a);this.path=this.port=this.host=this.scheme="";this.e=new n;this.anchor="";if(a!==null){c=a.match(d);b=c[1];d=c[2];e=c[3];f=c[4];g=c[5];c=c[6];b=b!==undefined?b.replace("://","").toLowerCase():
"http";e=e?e.replace(":",""):b==="https"?"443":"80";b=b=="http"&&e==="443"?"https":b;g=g?g.replace("?",""):"";c=c?c.replace("#",""):"";if(b==="https"&&e!=="443"||b==="http"&&e!=="80")d=d+":"+e;this.scheme=b;this.host=d;this.port=e;this.path=f||"/";this.e.r(g);this.anchor=c||""}}function n(a){var b=arguments.callee,c;if(!(this instanceof b))return new b(a);if(a!=undefined)for(c in a)if(a.hasOwnProperty(c))this[c]=a[c];return this}function i(a){if(!(this instanceof i))return new i(a);return this.w(a)}
function A(a){var b=[],c,d;for(c in a)if(a[c]&&a[c]!==undefined&&a[c]!=="")if(c==="realm")d=c+'="'+a[c]+'"';else b.push(c+'="'+i.b(a[c]+"")+'"');b.sort();d&&b.unshift(d);return b.join(", ")}function G(a,b,c,d){var e=[],f,g=i.b;for(f in c)c[f]!==undefined&&c[f]!==""&&e.push([i.b(f),i.b(c[f]+"")]);for(f in d)if(d[f]!==undefined&&d[f]!=="")c[f]||e.push([g(f),g(d[f]+"")]);e=e.sort(function(k,j){return k[0]<j[0]?-1:k[0]>j[0]?1:k[1]<j[1]?-1:k[1]>j[1]?1:0}).map(function(k){return k.join("=")});return[a,
g(b),g(e.join("&"))].join("&")}function H(a){function b(){return Math.floor(Math.random()*f.length)}a=a||64;var c=a/8;a="";var d=c/4;c=c%4;var e,f=["20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66",
"67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E"];for(e=0;e<d;e++)a+=f[b()]+f[b()]+f[b()]+f[b()];for(e=0;e<c;e++)a+=f[b()];return a}function I(){var a;if(typeof r.l!=="undefined"&&typeof r.l.s.u!="undefined")a=r.l.s.u();else if(typeof require!=="undefined")try{a=(new require("xhr")).XMLHttpRequest()}catch(b){if(typeof r.XMLHttpRequest!=="undefined")a=new r.XMLHttpRequest;else throw"No valid request transport found.";}else if(typeof r.XMLHttpRequest!==
"undefined")a=new r.XMLHttpRequest;else throw"No valid request transport found.";return a}function E(a){return Array(++a).join(0).split("")}function B(a){var b=[],c,d;for(d=0;d<a.length;d++){c=a.charCodeAt(d);if(c<128)b.push(c);else if(c<2048)b.push(192+(c>>6),128+(c&63));else if(c<65536)b.push(224+(c>>12),128+(c>>6&63),128+(c&63));else c<2097152&&b.push(240+(c>>18),128+(c>>12&63),128+(c>>6&63),128+(c&63))}return b}function s(a){if(a!==undefined){var b=a;if(b.constructor===String)b=B(b);a=(this instanceof
s?this:new s(a)).hash(b);b=[];var c=a.length,d;for(d=0;d<c;d++){b.push((a[d]>>>4).toString(16));b.push((a[d]&15).toString(16))}return b.join("")}else if(!(this instanceof s))return new s;return this}v.prototype={join:function(a){a=a||"";return this.D().join(a)},z:function(){var a,b=[];for(a in this)this.hasOwnProperty(a)&&b.push(a);return b},D:function(){var a,b=[];for(a in this)this.hasOwnProperty(a)&&b.push(this[a]);return b},unshift:function(){throw"not implimented";},push:function(){throw"not implimented";
},sort:function(){throw"not implimented";},A:function(a){var b=this.z(),c,d;a==undefined?b.sort():b.sort(a);for(a=0;a<b.length;a++){d=b[a];c=this[d];delete this[d];this[d]=c}return this},B:function(){var a={},b;for(b in this)if(this.hasOwnProperty(b))a[b]=this[b];return a}};w.prototype=new v;y.prototype={scheme:"",host:"",port:"",path:"",e:"",anchor:"",toString:function(){var a=this.e+"";return this.scheme+"://"+this.host+this.path+(a!=""?"?"+a:"")+(this.anchor!==""?"#"+this.anchor:"")}};n.prototype=
new w;n.prototype.toString=function(){var a,b=[],c="",d="",e=i.b;this.A();for(a in this)if(this.hasOwnProperty(a))if(a!=undefined&&this[a]!=undefined){d=e(a)+"="+e(this[a]);b.push(d)}if(b.length>0)c=b.join("&");return c};n.prototype.r=function(a){var b=arguments,c=b.length,d,e,f=i.C;if(c==1)if(typeof a==="object")for(d in a){if(a.hasOwnProperty(d))this[d]=f(a[d])}else{if(typeof a==="string"){b=a.split("&");d=0;for(c=b.length;d<c;d++){e=b[d].split("=");if(e[0]!="")this[e[0]]=f(e[1])}}}else for(d=0;d<
c;d+=2)this[b[d]]=f(b[d+1])};i.prototype={g:"",q:"",n:"",m:"",w:function(a){var b={i:a.i||false,j:a.j,h:a.h||"oob",o:a.o,p:a.p,c:a.c||"",d:a.d||"",k:"",f:a.f||"HMAC-SHA1"};this.g=a.g||"";this.q=a.q||"";this.n=a.n||"";this.m=a.m||"";this.J=function(){return[b.c,b.d]};this.K=function(){return b.c};this.L=function(){return b.d};this.S=function(c,d){if(d)c=[c,d];b.c=c[0];b.d=c[1]};this.M=function(){return b.k};this.U=function(c){b.k=c};this.T=function(c){b.h=c};this.O=function(c){var d,e,f,g,k,j,h,l,
m,p,o=[],F;p={};var D,C;d=c.method||"GET";e=y(c.url);f=c.data||{};g=c.headers||{};k=c.V||function(){};j=c.I||function(){};C=function(){var t=false,q;for(q in f)if(f[q]instanceof File||typeof f[q].fileName!="undefined")t=true;return t}();F=c.t?c.t:false;b.i&&netscape.R.G.i("UniversalBrowserRead UniversalBrowserWrite");h=I();h.onreadystatechange=function(){if(h.readyState===4){var t=/^(.*?):\s*(.*?)\r?$/mg,q={},u="",z;if(h.getAllResponseHeaders)for(u=h.getAllResponseHeaders();z=t.exec(u);)q[z[1]]=z[2];
else if(h.v){u=h.v();t=0;for(z=u.length;t<z;++t)q[u[t][0]]=u[t][1]}u=false;if("Content-Type"in q)if(q["Content-Type"]=="text/xml")u=true;q={text:h.responseText,xml:u?h.responseXML:"",P:g,Q:q};if(h.status>=200&&h.status<=226||h.status==304||h.status===0)k(q);else h.status>=400&&h.status!==0&&j(q)}};c={oauth_callback:b.h,oauth_consumer_key:b.o,oauth_token:b.c,oauth_signature_method:b.f,oauth_timestamp:parseInt(+new Date/1E3,10),oauth_nonce:H(),oauth_verifier:b.k,oauth_version:"1.0"};m=b.f;D=e.e.B();
for(l in D)p[l]=D[l];if((!("Content-Type"in g)||g["Content-Type"]=="application/x-www-form-urlencoded")&&!C)for(l in f)p[l]=f[l];p=G(d,e.scheme+"://"+e.host+e.path,c,p);m=i.f[m](b.p,b.d,p);c.N=m;if(this.g)c.realm=this.g;if(b.j)e=y(b.j+e.path);if(F||d=="GET"){e.e.r(f);o=null}else if(C){if(C){o=new FormData;for(l in f)o.append(l,f[l])}}else if(typeof f=="string"){o=f;"Content-Type"in g||(g["Content-Type"]="text/plain")}else{for(l in f)o.push(i.b(l)+"="+i.b(f[l]+""));o=o.sort().join("&");"Content-Type"in
g||(g["Content-Type"]="application/x-www-form-urlencoded")}h.open(d,e+"",true);h.setRequestHeader("Authorization","OAuth "+A(c));h.setRequestHeader("X-Requested-With","XMLHttpRequest");for(l in g)h.setRequestHeader(l,g[l]);h.send(o)};return this}};i.f={"HMAC-SHA1":function(a,b,c){var d;d=i.b;a=d(a);b=d(b||"");d=s.prototype;a=B(a+"&"+b);c=B(c);b=a.length;var e;if(b>d.a){a=d.hash(a);b=a.length}a=a.concat(E(d.a-b));b=a.slice(0);a=a.slice(0);for(e=0;e<d.a;e++){b[e]^=92;a[e]^=54}d=d.hash(b.concat(d.hash(a.concat(c))));
c="";a=d.length;for(b=0;b<a;b++)c+=String.fromCharCode(d[b]);d=c;return r.btoa(d)}};i.b=function(a){function b(g){g=g.toString(16).toUpperCase();if(g.length<2)g=0+g;return"%"+g}if(!a)return"";a+="";var c=/[ \t\r\n!*"'();:@&=+$,\/?%#\[\]<>{}|`^\\\u0080-\uffff]/,d=a.length,e=a.split(""),f;for(a=0;a<d;a++)if(f=e[a].match(c)){f=f[0].charCodeAt(0);if(f<128)e[a]=b(f);else if(f<2048)e[a]=b(192+(f>>6))+b(128+(f&63));else if(f<65536)e[a]=b(224+(f>>12))+b(128+(f>>6&63))+b(128+(f&63));else if(f<2097152)e[a]=
b(240+(f>>18))+b(128+(f>>12&63))+b(128+(f>>6&63))+b(128+(f&63))}return e.join("")};i.C=function(a){if(!a)return"";return a.replace(/%[a-fA-F0-9]{2}/ig,function(b){return String.fromCharCode(parseInt(b.replace("%",""),16))})};s.prototype=new s;s.prototype.a=64;s.prototype.hash=function(a){var b=[1732584193,4023233417,2562383102,271733878,3285377520],c=[1518500249,1859775393,2400959708,3395469782],d,e,f,g,k,j,h,l,m,p;if(a.constructor===String)a=B(a.H());d=a.length;f=Math.ceil((d+9)/this.a)*this.a-(d+
9);e=Math.floor(d/4294967296);d=Math.floor(d%4294967296);e=[e*8>>24&255,e*8>>16&255,e*8>>8&255,e*8&255,d*8>>24&255,d*8>>16&255,d*8>>8&255,d*8&255];a=a.concat([128],E(f),e);f=Math.ceil(a.length/this.a);for(e=0;e<f;e++){g=a.slice(e*this.a,(e+1)*this.a);k=g.length;d=[];for(j=0;j<k;j++)d[j>>>2]|=g[j]<<24-(j-(j>>2)*4)*8;g=b[0];k=b[1];j=b[2];h=b[3];l=b[4];for(m=0;m<80;m++){if(m>=16)d[m]=(d[m-3]^d[m-8]^d[m-14]^d[m-16])<<1|(d[m-3]^d[m-8]^d[m-14]^d[m-16])>>>31;p=Math.floor(m/20);var o;a:{switch(p){case 0:o=
k&j|~k&h;break a;case 1:case 3:o=k^j^h;break a;case 2:o=k&j|k&h|j&h;break a}o=-1}p=(g<<5|g>>>27)+o+l+c[p]+d[m];l=h;h=j;j=k<<30|k>>>2;k=g;g=p}b[0]+=g;b[1]+=k;b[2]+=j;b[3]+=h;b[4]+=l}a=[];for(c=0;c<b.length*32;c+=8)a.push(b[c>>>5]>>>24-c%32&255);return a};return i}(x);x=x||this;
(function(r){r.btoa=r.btoa||function(w){for(var v=0,y=w.length,n,i,A="";v<y;v+=3){n=[w.charCodeAt(v),w.charCodeAt(v+1),w.charCodeAt(v+2)];i=[n[0]>>2,(n[0]&3)<<4|n[1]>>4,(n[1]&15)<<2|n[2]>>6,n[2]&63];if(isNaN(n[1]))i[2]=64;if(isNaN(n[2]))i[3]=64;A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[0])+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[1])+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[2])+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[3])}return A}})(x);
